<div class="telecom-pack-xdsl-wifi-config">

    <bouncing-box-loader data-ng-if="ConfigWifiCtrl.loaders.wifi">
        <h3 class="top-space-m16"
            data-translate="loading">
        </h3>
    </bouncing-box-loader>

    <div data-ng-if="!ConfigWifiCtrl.loaders.wifi">

        <!-- Error Display -->
        <div data-ng-if="ConfigWifiCtrl.errors.wifi"
             class="alert alert-warning"
             role="alert">
            <span class="ovh-font ovh-font-warning" aria-hidden="true"></span>
            <p data-translate="xdsl_modem_wifi_config_error_missing"></p>
        </div> <!-- End of Error Display -->

        <div class="row"
             data-ng-if="ConfigWifiCtrl.wifis.length > 1">
            <!-- Wifis list display -->
            <div class="col-xs-12">
                <div class="widget-presentation">
                    <header class="widget-presentation-header">
                        <h2 class="widget-presentation-title"
                            data-translate="xdsl_modem_wifi_config_list_title">
                        </h2>
                    </header>
                </div>

                <div class="table-responsive-vertical">
                    <table class="table table-pretty table-hover table-striped no-space">
                        <thead>
                            <tr>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_table_ssid"></span>
                                </th>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_ssid_table_visibility"></span>
                                </th>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_security"></span>
                                </th>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_canal"></span>
                                </th>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_table_frequency"></span>
                                </th>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_table_band_steering"></span>
                                </th>

                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_table_guest"></span>
                                </th>
                                <th>
                                    <span data-translate="xdsl_modem_wifi_config_state"></span>
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-ng-repeat="wifi in ConfigWifiCtrl.wifis track by $index">
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_table_ssid' }">
                                    <span data-ng-bind="wifi.SSID"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_ssid_table_visibility' }">
                                    <span data-translate="{{ wifi.SSIDAdvertisementEnabled ? 'xdsl_modem_wifi_config_visible' : 'xdsl_modem_wifi_config_hidden' }}"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_security' }">
                                    <span data-translate="{{ 'xdsl_modem_wifi_' + wifi.securityType }}"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_canal' }">
                                    <span data-ng-bind="wifi.channelCustom"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_table_frequency' }">
                                    <span data-ng-bind="wifi.frequency"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_table_band_steering' }">
                                    <span data-translate="{{ wifi.bandSteering ? 'common_yes_capitalized' : 'common_no_capitalized' }}"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_table_guest' }">
                                    <span data-translate="{{ wifi.guest ? 'common_yes_capitalized' : 'common_no_capitalized' }}"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'xdsl_modem_wifi_config_state' }">
                                    <span data-translate="{{ wifi.enabled ? 'xdsl_modem_wifi_config_state_enabled' : 'xdsl_modem_wifi_config_state_disabled' }}"></span>
                                </td>
                                <td data-translate-attr="{ 'data-title': 'common_actions' }">
                                    <button type="button"
                                            class="btn-actions-list"
                                            data-ng-click="ConfigWifiCtrl.setSelectedWifi(wifi)"
                                            data-translate-attr="{ title: 'edit' }">
                                        <span class="ovh-font ovh-font-editer"
                                              aria-hidden="true">
                                        </span>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div> <!-- End of Wifis list display -->

        </div>

        <div class="row"
             data-ng-if="ConfigWifiCtrl.wifis.length === 1 || ConfigWifiCtrl.wifi">

            <!-- Wifi Configuration -->
            <div class="col-xs-12 col-md-6">
                <div class="widget-presentation">
                    <header class="widget-presentation-header">
                        <h2 class="widget-presentation-title"
                            data-translate="xdsl_modem_wifi_config_title"
                            data-translate-values="{ ssid: ConfigWifiCtrl.getWifiSsid() }">
                        </h2>
                    </header>
                </div>
                <form class="bottom-space-m16"
                      name="wifiConfigForm"
                      data-ng-submit="ConfigWifiCtrl.update()"
                      novalidate>

                    <!-- Info Display -->
                    <div data-ng-if="!ConfigWifiCtrl.mediator.capabilities.canChangeWLAN || ConfigWifiCtrl.mediator.tasks.changeModemConfigWLAN"
                         class="alert alert-info"
                         role="alert">
                        <span class="ovh-font ovh-font-info" aria-hidden="true"></span>
                        <p data-translate="xdsl_modem_wifi_config_info"></p>
                    </div> <!-- End of Info Display -->

                    <!-- Enabling Wifi -->
                    <div class="form-group">
                        <label class="control-label service-title"
                               data-translate="xdsl_modem_wifi_config_wifi"></label>
                        <div class="btn-group block clearfix bottom-space-m16">
                            <label class="btn btn-default"
                                   data-ng-model="ConfigWifiCtrl.wifi.enabled"
                                   data-uib-btn-radio="true"
                                   data-translate="common_yes_capitalized">
                            </label>

                            <label class="btn btn-default"
                                   data-ng-model="ConfigWifiCtrl.wifi.enabled"
                                   data-uib-btn-radio="false"
                                   data-translate="common_no_capitalized">
                            </label>
                        </div>
                    </div> <!-- End of Enabling Wifi -->

                    <!-- SSID -->
                    <div class="form-group"
                         data-ng-class="{ 'has-error': wifiConfigForm.wifiSSID.$invalid && wifiConfigForm.wifiSSID.$dirty }">
                        <label class="control-label service-title"
                               for="wifiSSID">
                            <span data-translate="xdsl_modem_wifi_config_ssid"></span>
                            <span class="ovh-font ovh-font-info"
                                  data-toggle="tooltip"
                                  data-uib-tooltip="{{ 'xdsl_modem_wifi_config_ssid_tooltip' | translate }}"
                                  data-tooltip-append-to-body="true"
                                  data-tooltip-placement="top"
                                  aria-hidden="true">
                            </span>
                        </label>
                        <div class="row">
                            <div class="col-xs-6">
                                <input type="text"
                                       id="wifiSSID"
                                       name="wifiSSID"
                                       data-translate-attr="{ placeholder: 'xdsl_modem_wifi_config_ssid' }"
                                       required
                                       data-ng-model="ConfigWifiCtrl.wifi.SSID"
                                       class="form-control"
                                       data-ng-minlength="2"
                                       data-ng-maxlength="32"
                                       data-ng-pattern="/^[\x00-\x7F]*$/">
                            </div>
                        </div>
                        <div data-ng-messages="wifiConfigForm.wifiSSID.$error"
                             data-ng-if="wifiConfigForm.wifiSSID.$invalid && wifiConfigForm.wifiSSID.$dirty"
                             role="alert"
                             class="top-space-m8">
                            <label for="wifiSSID"
                                   class="normal small"
                                   data-ng-message="required"
                                   data-translate="xdsl_modem_wifi_config_ssid_required">
                            </label>
                            <label for="wifiSSID"
                                   class="normal small"
                                   data-ng-message="minlength"
                                   data-translate="xdsl_modem_wifi_config_ssid_too_short">
                            </label>
                            <label for="wifiSSID"
                                   class="normal small"
                                   data-ng-message="maxlength"
                                   data-translate="xdsl_modem_wifi_config_ssid_too_long">
                            </label>
                            <label for="wifiSSID"
                                   class="normal small"
                                   data-ng-message="pattern"
                                   data-translate="xdsl_modem_wifi_config_ssid_wrong_chars">
                            </label>
                        </div>
                    </div> <!-- End of SSID -->

                    <!-- SSID Advertisement -->
                    <div class="form-group">
                        <label class="control-label service-title">
                            <span data-translate="xdsl_modem_wifi_config_ssid_advertisement"></span>
                            <span class="ovh-font ovh-font-info"
                                  data-toggle="tooltip"
                                  data-uib-tooltip="{{ 'xdsl_modem_wifi_config_ssid_advertisement_tooltip' | translate }}"
                                  data-tooltip-append-to-body="true"
                                  data-tooltip-placement="top"
                                  aria-hidden="true">
                            </span>
                        </label>
                        <div class="btn-group block clearfix bottom-space-m16">
                            <label class="btn btn-default"
                                   data-ng-model="ConfigWifiCtrl.wifi.SSIDAdvertisementEnabled"
                                   data-uib-btn-radio="true"
                                   data-translate="xdsl_modem_wifi_config_visible">
                            </label>

                            <label class="btn btn-default"
                                   data-ng-model="ConfigWifiCtrl.wifi.SSIDAdvertisementEnabled"
                                   data-uib-btn-radio="false"
                                   data-translate="xdsl_modem_wifi_config_hidden">
                            </label>
                        </div>
                    </div> <!-- End of SSID Advertisement -->

                    <!-- Security -->
                    <div class="form-group">
                        <label class="control-label service-title"
                               for="securityType">
                            <span data-translate="xdsl_modem_wifi_config_security"></span>
                            <span class="ovh-font ovh-font-info"
                                  data-toggle="tooltip"
                                  data-uib-tooltip="{{ 'xdsl_modem_wifi_config_security_tooltip' | translate }}"
                                  data-tooltip-append-to-body="true"
                                  data-tooltip-placement="top"
                                  aria-hidden="true">
                            </span>
                        </label>
                        <div class="row">
                            <div class="col-xs-6">
                                <div flat-input-container>
                                    <select flat-select
                                            name="securityType"
                                            id="securityType"
                                            class="form-control"
                                            data-ng-model="ConfigWifiCtrl.wifi.securityType"
                                            required="required"
                                            data-ng-change="ConfigWifiCtrl.resetKey()"
                                            data-ng-options="item as ('xdsl_modem_wifi_' + item | translate) for item in ConfigWifiCtrl.fields.securityType">
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div> <!-- End of Security -->

                    <!-- securityKey -->
                    <div class="form-group"
                         data-uib-collapse="ConfigWifiCtrl.wifi.securityType === 'None'"
                         data-ng-class="{ 'has-error': wifiConfigForm.wifiSecurityKey.$invalid && wifiConfigForm.wifiSecurityKey.$dirty }">
                        <label class="control-label service-title"
                               for="wifiSecurityKey">
                            <span data-translate="xdsl_modem_wifi_config_key"></span>
                            <span class="ovh-font ovh-font-info"
                                  data-toggle="tooltip"
                                  data-uib-tooltip="{{ 'xdsl_modem_wifi_config_key_tooltip' | translate }}"
                                  data-tooltip-append-to-body="true"
                                  data-tooltip-placement="top"
                                  aria-hidden="true">
                            </span>
                        </label>
                        <div class="row">
                            <div class="col-xs-6">
                                <input type="password"
                                       id="wifiSecurityKey"
                                       name="wifiSecurityKey"
                                       data-translate-attr="{ placeholder: 'xdsl_modem_wifi_config_key' }"
                                       data-ng-model="ConfigWifiCtrl.wifi.key"
                                       class="form-control"
                                       data-ng-required="ConfigWifiCtrl.hasConfigFieldChanged('securityType') && ConfigWifiCtrl.wifi.securityType !== 'None'"
                                       data-ng-minlength="6">
                            </div>
                        </div>
                        <div data-ng-messages="wifiConfigForm.wifiSecurityKey.$error"
                             data-ng-if="wifiConfigForm.wifiSecurityKey.$invalid"
                             role="alert"
                             class="top-space-m8">
                            <label for="wifiSecurityKey"
                                   class="normal small"
                                   data-ng-message="required"
                                   data-ng-if="wifiConfigForm.wifiSecurityKey.$dirty"
                                   data-translate="xdsl_modem_wifi_config_key_required">
                            </label>
                            <label for="wifiSecurityKey"
                                   class="normal small"
                                   data-ng-message="required"
                                   data-translate="xdsl_modem_wifi_config_type_changed">
                            </label>
                            <label for="wifiSecurityKey"
                                   class="normal small"
                                   data-ng-message="minlength"
                                   data-ng-if="wifiConfigForm.wifiSecurityKey.$dirty"
                                   data-translate="xdsl_modem_wifi_config_key_too_short">
                            </label>
                        </div>
                    </div> <!-- End of securityKey -->

                    <!-- confirmSecurityKey -->
                    <div class="form-group"
                         data-uib-collapse="ConfigWifiCtrl.wifi.securityType === 'None'"
                         data-ng-class="{ 'has-error': wifiConfigForm.wifiConfirmSecurityKey.$invalid && wifiConfigForm.wifiConfirmSecurityKey.$dirty }">
                        <label class="control-label service-title"
                               for="wifiConfirmSecurityKey"
                               data-translate="xdsl_modem_wifi_config_retype_new_key">
                        </label>
                        <div class="row">
                            <div class="col-xs-6">
                                <input type="password"
                                       id="wifiConfirmSecurityKey"
                                       name="wifiConfirmSecurityKey"
                                       data-translate-attr="{ placeholder: 'xdsl_modem_wifi_config_retype_new_key' }"
                                       data-ng-model="ConfigWifiCtrl.wifi.key2"
                                       class="form-control"
                                       data-match-password="wifiSecurityKey"
                                       data-ng-minlength="6">
                            </div>
                        </div>
                        <div data-ng-messages="wifiConfigForm.wifiConfirmSecurityKey.$error"
                             data-ng-if="wifiConfigForm.wifiConfirmSecurityKey.$invalid && wifiConfigForm.wifiConfirmSecurityKey.$dirty"
                             role="alert"
                             class="top-space-m8">
                            <label for="wifiConfirmSecurityKey"
                                   class="normal small"
                                   data-ng-message="passwordMatch"
                                   data-translate="xdsl_modem_wifi_config_key_not_matching">
                            </label>
                        </div>
                    </div> <!-- End of confirmSecurityKey -->

                    <!-- Channel -->
                    <div class="form-group"
                         data-ng-if="ConfigWifiCtrl.wifi.frequency !== '5GHz'">
                        <label class="control-label service-title"
                               for="channelMode">
                            <span data-translate="xdsl_modem_wifi_config_canal"></span>
                            <span class="ovh-font ovh-font-info"
                                data-toggle="tooltip"
                                data-uib-tooltip="{{'xdsl_modem_wifi_config_canal_tooltip' | translate}}"
                                data-tooltip-append-to-body="true"
                                data-tooltip-placement="top"
                                aria-hidden="true"></span>
                        </label>
                        <div class="row">
                            <div class="col-xs-6">
                                <div flat-input-container>
                                    <select name="channelMode"
                                            id="channelMode"
                                            flat-select
                                            class="form-control"
                                            data-ng-model="ConfigWifiCtrl.wifi.channelCustom"
                                            data-ng-change="ConfigWifiCtrl.onChannelChange()"
                                            data-ng-options="chanelMode for chanelMode in ConfigWifiCtrl.fields.channelMode"
                                            required>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div> <!-- End of Channel -->

                    <!-- Form actions -->
                    <div class="clearfix">
                        <button type="submit"
                                class="btn btn-primary pull-right"
                                data-ng-disabled="!ConfigWifiCtrl.hasConfigChange() || !wifiConfigForm.$valid">
                            <span data-translate="submit"></span>
                            <spinner data-ng-if="ConfigWifiCtrl.loaders.completed"></spinner>
                        </button>

                        <button type="button"
                                class="btn btn-default pull-left left-space-m0"
                                data-translate="cancel"
                                data-ng-click="ConfigWifiCtrl.cancelConfig()">
                        </button>
                    </div> <!-- End of Form actions -->

                </form>
            </div> <!-- End of Wifi Configuration -->
        </div>

    </div>
</div>
