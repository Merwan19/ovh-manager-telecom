<section class="telecom-sms-users">

    <div class="widget-presentation mb-3">
        <h2 class="widget-presentation-title"
            data-translate="sms_users_manage_title">
        </h2>

        <div class="mb-3 clearfix">
            <div class="btn-group float-left mr-3"
                 data-uib-dropdown
                 data-dropdown-append-to-body>
                <button id="btn-sms-users-actions"
                        type="button"
                        class="btn btn-default"
                        data-uib-dropdown-toggle>
                    <span class="fa fa-bars" aria-hidden="true"></span>
                    <span data-translate="common_actions"></span>
                    <span class="ovh-font ovh-font-small-arrow-down" aria-hidden="true"></span>
                </button>
                <ul class="dropdown-menu"
                    role="menu"
                    aria-labelledby="btn-sms-users-actions"
                    data-uib-dropdown-menu>
                    <li role="menuitem">
                        <i class="ovh-font ovh-font-add-circle" aria-hidden="true"></i>
                        <button
                            type="button"
                            class="btn btn-link"
                            data-ng-click="SmsUsersCtrl.add()"
                            data-translate="common_add">
                        </button>
                    </li>
                    <li role="menuitem">
                        <i class="ovh-font ovh-font-warning" aria-hidden="true"></i>
                        <button
                            type="button"
                            class="btn btn-link"
                            data-ng-click="SmsUsersCtrl.templates()"
                            data-translate="sms_users_actions_templates"
                            data-uib-tooltip="{{:: 'sms_users_templates_title' | translate }}"
                            data-tooltip-placement="right"
                            data-tooltip-append-to-body="true">
                        </button>
                    </li>
                    <li role="menuitem">
                        <i class="ovh-font ovh-font-arrow-rotate" aria-hidden="true"></i>
                        <button
                            type="button"
                            class="btn btn-link"
                            data-ng-click="SmsUsersCtrl.refresh()"
                            data-translate="common_refresh">
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <oui-datagrid data-rows="SmsUsersCtrl.users.sorted">
            <oui-column data-title="'sms_users_label_id' | translate" data-property="login" data-sortable>
                <span data-ng-if="$row.login.length >= 25">
                    <span data-ng-bind="$row.login | limitTo: 25"
                            data-uib-tooltip="{{ $row.login }}"
                            data-tooltip-class="word-break"
                            data-tooltip-append-to-body="true">
                    </span>...
                </span>
                <span data-ng-if="$row.login.length < 25"
                      data-ng-bind="$row.login">
                </span>
            </oui-column>
            <oui-column data-title="'sms_users_label_quota_status' | translate"
                        data-property="quotaInformations.quotaStatus"
                        data-sortable>
                <span class="text-capitalize"
                      data-ng-if="$row.quotaInformations.quotaStatus === 'active'"
                      data-translate="yes" >
                </span>
                <span data-ng-if="$row.quotaInformations.quotaStatus === 'inactive'"
                      data-translate="no" class="text-capitalize">
                </span>
            </oui-column>
            <oui-column data-title="'sms_users_label_quota' | translate"
                        data-property="quotaInformations.quotaLeft"
                        data-sortable>
                {{$row.quotaInformations.quotaLeft | number : 2}}
            </oui-column>
            <oui-column data-title="'sms_users_label_alert' | translate"
                        data-property="alertThresholdInformations.alertThreshold" data-sortable>
                <span class="text-capitalize"
                      data-translate="{{:: ($row.alertThresholdInformations.alertThreshold === -1) ? 'no' : 'yes' }}">
                </span>
            </oui-column>
            <oui-column data-title="'sms_users_label_threshold' | translate"
                        data-property="alertThresholdInformations.alertThreshold" data-sortable>
                <span data-ng-bind="($row.alertThresholdInformations.alertThreshold === -1) ? '-' : $row.alertThresholdInformations.alertThreshold">
                </span>
            </oui-column>
            <oui-column data-title="'sms_users_label_notification' | translate"
                        data-property="alertThresholdInformations.support"
                        data-sortable>
                <span data-ng-bind="::'sms_users_limit_user_support_' + $row.alertThresholdInformations.support | translate"
                    data-uib-tooltip="{{ $row.alertThresholdInformations.alertEmail }}"
                    data-tooltip-append-to-body="true">
                </span>
            </oui-column>
            <oui-action-menu align="end" compact>
                    <oui-action-menu-item
                        data-text="{{'sms_users_action_change_password_label' | translate}}"
                        on-click="SmsUsersCtrl.changePassword($row)">
                    </oui-action-menu-item>

                    <oui-action-menu-item
                        data-text="{{'sms_users_action_quota' | translate}}"
                        on-click="SmsUsersCtrl.quota($row)">
                    </oui-action-menu-item>

                    <oui-action-menu-item
                        data-text="{{'sms_users_action_limit' | translate}}"
                        on-click="SmsUsersCtrl.limit($row)">
                    </oui-action-menu-item>

                    <oui-action-menu-item
                        data-text="{{'sms_users_action_restriction_ip_label' | translate}}"
                        on-click="SmsUsersCtrl.restrict($row)">
                    </oui-action-menu-item>

                    <oui-action-menu-item
                        data-text="{{'sms_users_action_url_callback_label' | translate}}"
                        on-click="SmsUsersCtrl.callback($row)">
                    </oui-action-menu-item>

                    <oui-action-menu-item
                        data-text="{{'delete' | translate}}"
                        on-click="SmsUsersCtrl.remove($row)">
                    </oui-action-menu-item>
            </oui-action-menu>
        </oui-datagrid>

    </div>
</section>
