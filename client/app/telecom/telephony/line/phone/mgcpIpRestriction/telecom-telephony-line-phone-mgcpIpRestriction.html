<section class="telecom-telephony-line-phone-mgcpIpRestriction">

    <header>
        <section-back-link section-back-link-to-state="telecom.telephony.line.phone"
                           section-back-link-title="{{ 'telephony_group_line_phone_section_back_link' | translate }}">
        </section-back-link>
        <h1 data-translate="telephony_line_phone_mgcp_ip_restriction_title"></h1>
    </header>

    <div class="telecom-section-content">

        <toast-message></toast-message>

        <oui-loader data-ng-if="MgcpIpRestrictionCtrl.isLoading"
                    data-size="m">
        </oui-loader>

        <div class="row"
             data-ng-if="!MgcpIpRestrictionCtrl.isLoading">
            <div class="col-xs-12 col-md-6">
                <section class="widget-presentation">
                    <h2 class="widget-presentation-title"
                        data-translate="telephony_line_phone_mgcp_ip_restriction_line_title">
                    </h2>
                    <p class="alert alert-info"
                       role="alert"
                       data-translate="telephony_line_phone_mgcp_ip_restriction_line_info">
                    </p>
                    <form name="mgcpIpRestrictionForm"
                          id="mgcpIpRestrictionForm"
                          data-ng-submit="MgcpIpRestrictionCtrl.setMgcpIpRestriction()">
                        <div class="form-group mb-3">
                            <label for="mgcpIpRestriction"
                                   data-translate="telephony_line_phone_mgcp_ip_restriction_label">
                            </label>
                            <input
                                type="text"
                                name="mgcpIpRestriction"
                                id="mgcpIpRestriction"
                                class="form-control"
                                data-ng-model="MgcpIpRestrictionCtrl.mgcpIpRestrictionForm.mgcpIpRestriction"
                                data-ng-pattern="MgcpIpRestrictionCtrl.ipValidator"
                                data-ng-disabled="MgcpIpRestrictionCtrl.isChangingMgcpIpRestriction"
                                data-translate-attr="{ placeholder: 'telephony_line_phone_mgcp_ip_restriction_placeholder' }" />
                            <div role="alert"
                                 data-ng-messages="mgcpIpRestrictionForm.$error">
                                <p class="text-danger"
                                   data-ng-message="pattern"
                                   data-translate="telephony_line_phone_mgcp_ip_restriction_error_pattern">
                                </p>
                            </div>
                        </div>
                        <div class="form-group mt-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <hr/>
                                    <telephony-bulk-action
                                        data-billing-account="{{ MgcpIpRestrictionCtrl.bulkDatas.billingAccount }}"
                                        data-service-name="{{ MgcpIpRestrictionCtrl.bulkDatas.serviceName }}"
                                        data-custom-class="link d-block pl-0 mb-3"
                                        data-ng-disabled="mgcpIpRestrictionForm.$invalid ||
                                                          !MgcpIpRestrictionCtrl.hasMgcpIpRestrictionChanged() ||
                                                          MgcpIpRestrictionCtrl.isChangingMgcpIpRestriction"
                                        data-filter-services="MgcpIpRestrictionCtrl.filterServices"
                                        data-bulk-infos="MgcpIpRestrictionCtrl.bulkDatas.infos"
                                        data-get-bulk-params="MgcpIpRestrictionCtrl.getBulkParams"
                                        data-on-success="MgcpIpRestrictionCtrl.onBulkSuccess"
                                        data-on-error="MgcpIpRestrictionCtrl.onBulkError">
                                    </telephony-bulk-action>
                                    <button
                                        type="submit"
                                        class="btn btn-primary"
                                        data-ng-disabled="mgcpIpRestrictionForm.$invalid ||
                                                          !MgcpIpRestrictionCtrl.hasMgcpIpRestrictionChanged() ||
                                                          MgcpIpRestrictionCtrl.isChangingMgcpIpRestriction">
                                        <oui-loader class="mr-2"
                                                    data-ng-if="MgcpIpRestrictionCtrl.isChangingMgcpIpRestriction"
                                                    data-size="s">
                                        </oui-loader>
                                        <span data-translate="telephony_line_phone_mgcp_ip_restriction_submit"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </section><!-- .widget-presentation -->
            </div>
            <div class="col-xs-12 col-md-6">
                <section class="widget-presentation">
                    <h2 class="widget-presentation-title"
                        data-translate="telephony_line_phone_mgcp_ip_restriction_customer_code_title">
                    </h2>
                    <p class="alert alert-info"
                       role="alert"
                       data-translate="telephony_line_phone_mgcp_ip_restriction_customer_code_info">
                    </p>
                    <form name="mgcpDefaultIpRestrictionForm"
                          id="mgcpDefaultIpRestrictionForm"
                          data-ng-submit="MgcpIpRestrictionCtrl.setMgcpDefaultIpRestriction()">
                        <div class="form-group mb-3">
                            <label for="mgcpDefaultIpRestriction"
                                   data-translate="telephony_line_phone_mgcp_ip_restriction_label">
                            </label>
                            <input
                                type="text"
                                name="mgcpDefaultIpRestriction"
                                id="mgcpDefaultIpRestriction"
                                class="form-control"
                                data-ng-model="MgcpIpRestrictionCtrl.mgcpDefaultIpRestrictionForm.subnet"
                                data-ng-pattern="MgcpIpRestrictionCtrl.ipValidator"
                                data-ng-disabled="MgcpIpRestrictionCtrl.isChangingMgcpDefaultIpRestriction"
                                data-translate-attr="{ placeholder: 'telephony_line_phone_mgcp_ip_restriction_default_placeholder' }" />
                            <div role="alert"
                                 data-ng-messages="mgcpDefaultIpRestrictionForm.$error">
                                <p class="text-danger"
                                   data-ng-message="pattern"
                                   data-translate="telephony_line_phone_mgcp_ip_restriction_error_pattern">
                                </p>
                            </div>
                        </div>
                        <div class="form-group">
                            <button
                                type="submit"
                                class="btn btn-primary"
                                data-ng-disabled="mgcpDefaultIpRestrictionForm.$invalid ||
                                                  !MgcpIpRestrictionCtrl.hasMgcpDefaultIpRestrictionChanged() ||
                                                  MgcpIpRestrictionCtrl.isChangingMgcpDefaultIpRestriction">
                                <oui-loader class="mr-2"
                                            data-ng-if="MgcpIpRestrictionCtrl.isChangingMgcpDefaultIpRestriction"
                                            data-size="s">
                                </oui-loader>
                                <span data-translate="telephony_line_phone_mgcp_ip_restriction_submit"></span>
                            </button>
                        </div>
                    </form>
                </section><!-- .widget-presentation -->
            </div>
        </div><!-- .row -->
    </div><!-- .telecom-section-content -->
</section><!-- .telecom-telephony-line-phone-mgcpIpRestriction -->
