<section class="telecom-telephony-line-management-detailsOffer">

    <header>
        <section-back-link section-back-link-to-state="telecom.telephony.line.phone"
                           section-back-link-title="{{ 'telephony_group_line_phone_section_back_link' | translate }}">
        </section-back-link>
        <h1 data-ng-if="!ProgrammableKeysCtrl.loading.init && ProgrammableKeysCtrl.line.hasPhone"
            data-translate="telephony_line_phone_programmableKeys_title"
            data-translate-values="{ phone : ProgrammableKeysCtrl.line.phone.description }">
        </h1>
    </header>

    <bouncing-box-loader data-ng-if="ProgrammableKeysCtrl.loading.init">
        <h4 data-translate="loading"></h4>
    </bouncing-box-loader>

    <div class="telecom-section-content" data-ng-if="ProgrammableKeysCtrl.line.hasPhone && !ProgrammableKeysCtrl.loading.init">
        <div class="widget-presentation">
            <h2 class="widget-presentation-title" data-translate="telephony_line_phone_programmableKeys_title_2"></h2>
        </div>
        <div class="row">
            <div class="col-xs-12 table-responsive-vertical" data-ng-if="!ProgrammableKeysCtrl.loading.init">
                <table class="table table-pretty table-hover table-striped no-space" summary="{{'telephony_line_phone_programmableKeys_summary'|translate}}">
                    <caption class="sr-only" data-translate="telephony_line_phone_programmableKeys_caption"></caption>
                    <thead>
                        <th id="keys">
                            <button class="no-style no-outline left-space-p0" data-role="button"
                                data-ng-click="ProgrammableKeysCtrl.orderBy('keyNum')">
                                <label class="pointer" data-translate="telephony_line_phone_programmableKeys_keys_title"></label>
                                <span class="table-pretty-filter">
                                    <i class="fa" data-ng-class="{
                                        'fa-sort': ProgrammableKeysCtrl.order.by !== 'keyNum',
                                        'fa-sort-desc': ProgrammableKeysCtrl.order.by === 'keyNum' && ProgrammableKeysCtrl.order.desc,
                                        'fa-sort-asc': ProgrammableKeysCtrl.order.by === 'keyNum' && !ProgrammableKeysCtrl.order.desc
                                    }"></i>
                                </span>
                            </button>
                        </th>
                        <th id="function">
                            <button class="no-style no-outline left-space-p0" data-role="button"
                                data-ng-click="ProgrammableKeysCtrl.orderBy('functionLabel')">
                                <label data-translate="telephony_line_phone_programmableKeys_function_title"></label>
                                <span class="table-pretty-filter">
                                    <i class="fa" data-ng-class="{
                                        'fa-sort': ProgrammableKeysCtrl.order.by !== 'functionLabel',
                                        'fa-sort-desc': ProgrammableKeysCtrl.order.by === 'functionLabel' && ProgrammableKeysCtrl.order.desc,
                                        'fa-sort-asc': ProgrammableKeysCtrl.order.by === 'functionLabel' && !ProgrammableKeysCtrl.order.desc
                                    }"></i>
                                </span>
                            </button>
                        </th>
                        <th id="params">
                            <button class="no-style no-outline left-space-p0" data-role="button"
                                data-ng-click="ProgrammableKeysCtrl.orderBy('parameter')">
                                <label data-translate="telephony_line_phone_programmableKeys_supp_param_title"></label>
                                <span class="table-pretty-filter">
                                    <i class="fa" data-ng-class="{
                                        'fa-sort': ProgrammableKeysCtrl.order.by !== 'parameter',
                                        'fa-sort-desc': ProgrammableKeysCtrl.order.by === 'parameter' && ProgrammableKeysCtrl.order.desc,
                                        'fa-sort-asc': ProgrammableKeysCtrl.order.by === 'parameter' && !ProgrammableKeysCtrl.order.desc
                                    }"></i>
                                </span>
                            </button>
                        </th>
                        <th>&#160;</th>
                    </thead>
                    <tbody data-ng-if="ProgrammableKeysCtrl.functionKeys.raw.length && !ProgrammableKeysCtrl.loading.keys">
                        <tr data-ng-repeat="key in ProgrammableKeysCtrl.functionKeys.raw | orderBy:ProgrammableKeysCtrl.order.by:ProgrammableKeysCtrl.order.desc track by $index">
                            <td headers="keys" data-ng-bind="key.label || '-'"></td>
                            <td headers="function" data-ng-bind="(key.function && ('telephony_line_phone_programmableKeys_' + key.function) | translate) || '-'"></td>
                            <td headers="params" data-ng-bind="key.parameter || '-'"></td>
                            <td>
                                <button type="button" class="btn btn-default pull-right" data-ng-click="ProgrammableKeysCtrl.edit(key);">
                                    <i class="ovh-font ovh-font-editer"></i>
                                    <span class="sr-only" data-ng-bind="user.login + '-' + ('edit' | translate)"></span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                    <tbody data-ng-if="!ProgrammableKeysCtrl.functionKeys.raw.length && !ProgrammableKeysCtrl.loading.keys">
                        <tr>
                            <td class="text-center" colspan="3">
                                <span data-translate="telephony_line_phone_programmableKeys_no_key"></span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="telecom-section-content" data-ng-if="!ProgrammableKeysCtrl.line.hasPhone && !ProgrammableKeysCtrl.loading.init">
        <div class="row">
            <div class="col-xs-12">
                <p class="text-danger text-center fs14 bold" data-translate="telephony_line_phone_programmableKeys_no_phone"></p>
            </div>
        </div>
    </div>
</section>
